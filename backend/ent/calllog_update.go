// Code generated by ent, DO NOT EDIT.

package ent

import (
	"context"
	"errors"
	"fmt"
	"time"

	"entgo.io/ent/dialect/sql"
	"entgo.io/ent/dialect/sql/sqlgraph"
	"entgo.io/ent/schema/field"
	"github.com/jordanlanch/industrydb/ent/calllog"
	"github.com/jordanlanch/industrydb/ent/lead"
	"github.com/jordanlanch/industrydb/ent/predicate"
	"github.com/jordanlanch/industrydb/ent/user"
)

// CallLogUpdate is the builder for updating CallLog entities.
type CallLogUpdate struct {
	config
	hooks    []Hook
	mutation *CallLogMutation
}

// Where appends a list predicates to the CallLogUpdate builder.
func (_u *CallLogUpdate) Where(ps ...predicate.CallLog) *CallLogUpdate {
	_u.mutation.Where(ps...)
	return _u
}

// SetUserID sets the "user_id" field.
func (_u *CallLogUpdate) SetUserID(v int) *CallLogUpdate {
	_u.mutation.SetUserID(v)
	return _u
}

// SetNillableUserID sets the "user_id" field if the given value is not nil.
func (_u *CallLogUpdate) SetNillableUserID(v *int) *CallLogUpdate {
	if v != nil {
		_u.SetUserID(*v)
	}
	return _u
}

// SetLeadID sets the "lead_id" field.
func (_u *CallLogUpdate) SetLeadID(v int) *CallLogUpdate {
	_u.mutation.SetLeadID(v)
	return _u
}

// SetNillableLeadID sets the "lead_id" field if the given value is not nil.
func (_u *CallLogUpdate) SetNillableLeadID(v *int) *CallLogUpdate {
	if v != nil {
		_u.SetLeadID(*v)
	}
	return _u
}

// ClearLeadID clears the value of the "lead_id" field.
func (_u *CallLogUpdate) ClearLeadID() *CallLogUpdate {
	_u.mutation.ClearLeadID()
	return _u
}

// SetPhoneNumber sets the "phone_number" field.
func (_u *CallLogUpdate) SetPhoneNumber(v string) *CallLogUpdate {
	_u.mutation.SetPhoneNumber(v)
	return _u
}

// SetNillablePhoneNumber sets the "phone_number" field if the given value is not nil.
func (_u *CallLogUpdate) SetNillablePhoneNumber(v *string) *CallLogUpdate {
	if v != nil {
		_u.SetPhoneNumber(*v)
	}
	return _u
}

// SetDirection sets the "direction" field.
func (_u *CallLogUpdate) SetDirection(v calllog.Direction) *CallLogUpdate {
	_u.mutation.SetDirection(v)
	return _u
}

// SetNillableDirection sets the "direction" field if the given value is not nil.
func (_u *CallLogUpdate) SetNillableDirection(v *calllog.Direction) *CallLogUpdate {
	if v != nil {
		_u.SetDirection(*v)
	}
	return _u
}

// SetStatus sets the "status" field.
func (_u *CallLogUpdate) SetStatus(v calllog.Status) *CallLogUpdate {
	_u.mutation.SetStatus(v)
	return _u
}

// SetNillableStatus sets the "status" field if the given value is not nil.
func (_u *CallLogUpdate) SetNillableStatus(v *calllog.Status) *CallLogUpdate {
	if v != nil {
		_u.SetStatus(*v)
	}
	return _u
}

// SetDuration sets the "duration" field.
func (_u *CallLogUpdate) SetDuration(v int) *CallLogUpdate {
	_u.mutation.ResetDuration()
	_u.mutation.SetDuration(v)
	return _u
}

// SetNillableDuration sets the "duration" field if the given value is not nil.
func (_u *CallLogUpdate) SetNillableDuration(v *int) *CallLogUpdate {
	if v != nil {
		_u.SetDuration(*v)
	}
	return _u
}

// AddDuration adds value to the "duration" field.
func (_u *CallLogUpdate) AddDuration(v int) *CallLogUpdate {
	_u.mutation.AddDuration(v)
	return _u
}

// SetProviderCallID sets the "provider_call_id" field.
func (_u *CallLogUpdate) SetProviderCallID(v string) *CallLogUpdate {
	_u.mutation.SetProviderCallID(v)
	return _u
}

// SetNillableProviderCallID sets the "provider_call_id" field if the given value is not nil.
func (_u *CallLogUpdate) SetNillableProviderCallID(v *string) *CallLogUpdate {
	if v != nil {
		_u.SetProviderCallID(*v)
	}
	return _u
}

// ClearProviderCallID clears the value of the "provider_call_id" field.
func (_u *CallLogUpdate) ClearProviderCallID() *CallLogUpdate {
	_u.mutation.ClearProviderCallID()
	return _u
}

// SetFromNumber sets the "from_number" field.
func (_u *CallLogUpdate) SetFromNumber(v string) *CallLogUpdate {
	_u.mutation.SetFromNumber(v)
	return _u
}

// SetNillableFromNumber sets the "from_number" field if the given value is not nil.
func (_u *CallLogUpdate) SetNillableFromNumber(v *string) *CallLogUpdate {
	if v != nil {
		_u.SetFromNumber(*v)
	}
	return _u
}

// ClearFromNumber clears the value of the "from_number" field.
func (_u *CallLogUpdate) ClearFromNumber() *CallLogUpdate {
	_u.mutation.ClearFromNumber()
	return _u
}

// SetToNumber sets the "to_number" field.
func (_u *CallLogUpdate) SetToNumber(v string) *CallLogUpdate {
	_u.mutation.SetToNumber(v)
	return _u
}

// SetNillableToNumber sets the "to_number" field if the given value is not nil.
func (_u *CallLogUpdate) SetNillableToNumber(v *string) *CallLogUpdate {
	if v != nil {
		_u.SetToNumber(*v)
	}
	return _u
}

// ClearToNumber clears the value of the "to_number" field.
func (_u *CallLogUpdate) ClearToNumber() *CallLogUpdate {
	_u.mutation.ClearToNumber()
	return _u
}

// SetCost sets the "cost" field.
func (_u *CallLogUpdate) SetCost(v float64) *CallLogUpdate {
	_u.mutation.ResetCost()
	_u.mutation.SetCost(v)
	return _u
}

// SetNillableCost sets the "cost" field if the given value is not nil.
func (_u *CallLogUpdate) SetNillableCost(v *float64) *CallLogUpdate {
	if v != nil {
		_u.SetCost(*v)
	}
	return _u
}

// AddCost adds value to the "cost" field.
func (_u *CallLogUpdate) AddCost(v float64) *CallLogUpdate {
	_u.mutation.AddCost(v)
	return _u
}

// SetRecordingURL sets the "recording_url" field.
func (_u *CallLogUpdate) SetRecordingURL(v string) *CallLogUpdate {
	_u.mutation.SetRecordingURL(v)
	return _u
}

// SetNillableRecordingURL sets the "recording_url" field if the given value is not nil.
func (_u *CallLogUpdate) SetNillableRecordingURL(v *string) *CallLogUpdate {
	if v != nil {
		_u.SetRecordingURL(*v)
	}
	return _u
}

// ClearRecordingURL clears the value of the "recording_url" field.
func (_u *CallLogUpdate) ClearRecordingURL() *CallLogUpdate {
	_u.mutation.ClearRecordingURL()
	return _u
}

// SetRecordingDuration sets the "recording_duration" field.
func (_u *CallLogUpdate) SetRecordingDuration(v int) *CallLogUpdate {
	_u.mutation.ResetRecordingDuration()
	_u.mutation.SetRecordingDuration(v)
	return _u
}

// SetNillableRecordingDuration sets the "recording_duration" field if the given value is not nil.
func (_u *CallLogUpdate) SetNillableRecordingDuration(v *int) *CallLogUpdate {
	if v != nil {
		_u.SetRecordingDuration(*v)
	}
	return _u
}

// AddRecordingDuration adds value to the "recording_duration" field.
func (_u *CallLogUpdate) AddRecordingDuration(v int) *CallLogUpdate {
	_u.mutation.AddRecordingDuration(v)
	return _u
}

// ClearRecordingDuration clears the value of the "recording_duration" field.
func (_u *CallLogUpdate) ClearRecordingDuration() *CallLogUpdate {
	_u.mutation.ClearRecordingDuration()
	return _u
}

// SetNotes sets the "notes" field.
func (_u *CallLogUpdate) SetNotes(v string) *CallLogUpdate {
	_u.mutation.SetNotes(v)
	return _u
}

// SetNillableNotes sets the "notes" field if the given value is not nil.
func (_u *CallLogUpdate) SetNillableNotes(v *string) *CallLogUpdate {
	if v != nil {
		_u.SetNotes(*v)
	}
	return _u
}

// ClearNotes clears the value of the "notes" field.
func (_u *CallLogUpdate) ClearNotes() *CallLogUpdate {
	_u.mutation.ClearNotes()
	return _u
}

// SetDisposition sets the "disposition" field.
func (_u *CallLogUpdate) SetDisposition(v string) *CallLogUpdate {
	_u.mutation.SetDisposition(v)
	return _u
}

// SetNillableDisposition sets the "disposition" field if the given value is not nil.
func (_u *CallLogUpdate) SetNillableDisposition(v *string) *CallLogUpdate {
	if v != nil {
		_u.SetDisposition(*v)
	}
	return _u
}

// ClearDisposition clears the value of the "disposition" field.
func (_u *CallLogUpdate) ClearDisposition() *CallLogUpdate {
	_u.mutation.ClearDisposition()
	return _u
}

// SetIsRecorded sets the "is_recorded" field.
func (_u *CallLogUpdate) SetIsRecorded(v bool) *CallLogUpdate {
	_u.mutation.SetIsRecorded(v)
	return _u
}

// SetNillableIsRecorded sets the "is_recorded" field if the given value is not nil.
func (_u *CallLogUpdate) SetNillableIsRecorded(v *bool) *CallLogUpdate {
	if v != nil {
		_u.SetIsRecorded(*v)
	}
	return _u
}

// SetStartedAt sets the "started_at" field.
func (_u *CallLogUpdate) SetStartedAt(v time.Time) *CallLogUpdate {
	_u.mutation.SetStartedAt(v)
	return _u
}

// SetNillableStartedAt sets the "started_at" field if the given value is not nil.
func (_u *CallLogUpdate) SetNillableStartedAt(v *time.Time) *CallLogUpdate {
	if v != nil {
		_u.SetStartedAt(*v)
	}
	return _u
}

// ClearStartedAt clears the value of the "started_at" field.
func (_u *CallLogUpdate) ClearStartedAt() *CallLogUpdate {
	_u.mutation.ClearStartedAt()
	return _u
}

// SetEndedAt sets the "ended_at" field.
func (_u *CallLogUpdate) SetEndedAt(v time.Time) *CallLogUpdate {
	_u.mutation.SetEndedAt(v)
	return _u
}

// SetNillableEndedAt sets the "ended_at" field if the given value is not nil.
func (_u *CallLogUpdate) SetNillableEndedAt(v *time.Time) *CallLogUpdate {
	if v != nil {
		_u.SetEndedAt(*v)
	}
	return _u
}

// ClearEndedAt clears the value of the "ended_at" field.
func (_u *CallLogUpdate) ClearEndedAt() *CallLogUpdate {
	_u.mutation.ClearEndedAt()
	return _u
}

// SetUpdatedAt sets the "updated_at" field.
func (_u *CallLogUpdate) SetUpdatedAt(v time.Time) *CallLogUpdate {
	_u.mutation.SetUpdatedAt(v)
	return _u
}

// SetUser sets the "user" edge to the User entity.
func (_u *CallLogUpdate) SetUser(v *User) *CallLogUpdate {
	return _u.SetUserID(v.ID)
}

// SetLead sets the "lead" edge to the Lead entity.
func (_u *CallLogUpdate) SetLead(v *Lead) *CallLogUpdate {
	return _u.SetLeadID(v.ID)
}

// Mutation returns the CallLogMutation object of the builder.
func (_u *CallLogUpdate) Mutation() *CallLogMutation {
	return _u.mutation
}

// ClearUser clears the "user" edge to the User entity.
func (_u *CallLogUpdate) ClearUser() *CallLogUpdate {
	_u.mutation.ClearUser()
	return _u
}

// ClearLead clears the "lead" edge to the Lead entity.
func (_u *CallLogUpdate) ClearLead() *CallLogUpdate {
	_u.mutation.ClearLead()
	return _u
}

// Save executes the query and returns the number of nodes affected by the update operation.
func (_u *CallLogUpdate) Save(ctx context.Context) (int, error) {
	_u.defaults()
	return withHooks(ctx, _u.sqlSave, _u.mutation, _u.hooks)
}

// SaveX is like Save, but panics if an error occurs.
func (_u *CallLogUpdate) SaveX(ctx context.Context) int {
	affected, err := _u.Save(ctx)
	if err != nil {
		panic(err)
	}
	return affected
}

// Exec executes the query.
func (_u *CallLogUpdate) Exec(ctx context.Context) error {
	_, err := _u.Save(ctx)
	return err
}

// ExecX is like Exec, but panics if an error occurs.
func (_u *CallLogUpdate) ExecX(ctx context.Context) {
	if err := _u.Exec(ctx); err != nil {
		panic(err)
	}
}

// defaults sets the default values of the builder before save.
func (_u *CallLogUpdate) defaults() {
	if _, ok := _u.mutation.UpdatedAt(); !ok {
		v := calllog.UpdateDefaultUpdatedAt()
		_u.mutation.SetUpdatedAt(v)
	}
}

// check runs all checks and user-defined validators on the builder.
func (_u *CallLogUpdate) check() error {
	if v, ok := _u.mutation.PhoneNumber(); ok {
		if err := calllog.PhoneNumberValidator(v); err != nil {
			return &ValidationError{Name: "phone_number", err: fmt.Errorf(`ent: validator failed for field "CallLog.phone_number": %w`, err)}
		}
	}
	if v, ok := _u.mutation.Direction(); ok {
		if err := calllog.DirectionValidator(v); err != nil {
			return &ValidationError{Name: "direction", err: fmt.Errorf(`ent: validator failed for field "CallLog.direction": %w`, err)}
		}
	}
	if v, ok := _u.mutation.Status(); ok {
		if err := calllog.StatusValidator(v); err != nil {
			return &ValidationError{Name: "status", err: fmt.Errorf(`ent: validator failed for field "CallLog.status": %w`, err)}
		}
	}
	if v, ok := _u.mutation.Duration(); ok {
		if err := calllog.DurationValidator(v); err != nil {
			return &ValidationError{Name: "duration", err: fmt.Errorf(`ent: validator failed for field "CallLog.duration": %w`, err)}
		}
	}
	if v, ok := _u.mutation.ProviderCallID(); ok {
		if err := calllog.ProviderCallIDValidator(v); err != nil {
			return &ValidationError{Name: "provider_call_id", err: fmt.Errorf(`ent: validator failed for field "CallLog.provider_call_id": %w`, err)}
		}
	}
	if v, ok := _u.mutation.FromNumber(); ok {
		if err := calllog.FromNumberValidator(v); err != nil {
			return &ValidationError{Name: "from_number", err: fmt.Errorf(`ent: validator failed for field "CallLog.from_number": %w`, err)}
		}
	}
	if v, ok := _u.mutation.ToNumber(); ok {
		if err := calllog.ToNumberValidator(v); err != nil {
			return &ValidationError{Name: "to_number", err: fmt.Errorf(`ent: validator failed for field "CallLog.to_number": %w`, err)}
		}
	}
	if v, ok := _u.mutation.Cost(); ok {
		if err := calllog.CostValidator(v); err != nil {
			return &ValidationError{Name: "cost", err: fmt.Errorf(`ent: validator failed for field "CallLog.cost": %w`, err)}
		}
	}
	if v, ok := _u.mutation.RecordingDuration(); ok {
		if err := calllog.RecordingDurationValidator(v); err != nil {
			return &ValidationError{Name: "recording_duration", err: fmt.Errorf(`ent: validator failed for field "CallLog.recording_duration": %w`, err)}
		}
	}
	if v, ok := _u.mutation.Disposition(); ok {
		if err := calllog.DispositionValidator(v); err != nil {
			return &ValidationError{Name: "disposition", err: fmt.Errorf(`ent: validator failed for field "CallLog.disposition": %w`, err)}
		}
	}
	if _u.mutation.UserCleared() && len(_u.mutation.UserIDs()) > 0 {
		return errors.New(`ent: clearing a required unique edge "CallLog.user"`)
	}
	return nil
}

func (_u *CallLogUpdate) sqlSave(ctx context.Context) (_node int, err error) {
	if err := _u.check(); err != nil {
		return _node, err
	}
	_spec := sqlgraph.NewUpdateSpec(calllog.Table, calllog.Columns, sqlgraph.NewFieldSpec(calllog.FieldID, field.TypeInt))
	if ps := _u.mutation.predicates; len(ps) > 0 {
		_spec.Predicate = func(selector *sql.Selector) {
			for i := range ps {
				ps[i](selector)
			}
		}
	}
	if value, ok := _u.mutation.PhoneNumber(); ok {
		_spec.SetField(calllog.FieldPhoneNumber, field.TypeString, value)
	}
	if value, ok := _u.mutation.Direction(); ok {
		_spec.SetField(calllog.FieldDirection, field.TypeEnum, value)
	}
	if value, ok := _u.mutation.Status(); ok {
		_spec.SetField(calllog.FieldStatus, field.TypeEnum, value)
	}
	if value, ok := _u.mutation.Duration(); ok {
		_spec.SetField(calllog.FieldDuration, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedDuration(); ok {
		_spec.AddField(calllog.FieldDuration, field.TypeInt, value)
	}
	if value, ok := _u.mutation.ProviderCallID(); ok {
		_spec.SetField(calllog.FieldProviderCallID, field.TypeString, value)
	}
	if _u.mutation.ProviderCallIDCleared() {
		_spec.ClearField(calllog.FieldProviderCallID, field.TypeString)
	}
	if value, ok := _u.mutation.FromNumber(); ok {
		_spec.SetField(calllog.FieldFromNumber, field.TypeString, value)
	}
	if _u.mutation.FromNumberCleared() {
		_spec.ClearField(calllog.FieldFromNumber, field.TypeString)
	}
	if value, ok := _u.mutation.ToNumber(); ok {
		_spec.SetField(calllog.FieldToNumber, field.TypeString, value)
	}
	if _u.mutation.ToNumberCleared() {
		_spec.ClearField(calllog.FieldToNumber, field.TypeString)
	}
	if value, ok := _u.mutation.Cost(); ok {
		_spec.SetField(calllog.FieldCost, field.TypeFloat64, value)
	}
	if value, ok := _u.mutation.AddedCost(); ok {
		_spec.AddField(calllog.FieldCost, field.TypeFloat64, value)
	}
	if value, ok := _u.mutation.RecordingURL(); ok {
		_spec.SetField(calllog.FieldRecordingURL, field.TypeString, value)
	}
	if _u.mutation.RecordingURLCleared() {
		_spec.ClearField(calllog.FieldRecordingURL, field.TypeString)
	}
	if value, ok := _u.mutation.RecordingDuration(); ok {
		_spec.SetField(calllog.FieldRecordingDuration, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedRecordingDuration(); ok {
		_spec.AddField(calllog.FieldRecordingDuration, field.TypeInt, value)
	}
	if _u.mutation.RecordingDurationCleared() {
		_spec.ClearField(calllog.FieldRecordingDuration, field.TypeInt)
	}
	if value, ok := _u.mutation.Notes(); ok {
		_spec.SetField(calllog.FieldNotes, field.TypeString, value)
	}
	if _u.mutation.NotesCleared() {
		_spec.ClearField(calllog.FieldNotes, field.TypeString)
	}
	if value, ok := _u.mutation.Disposition(); ok {
		_spec.SetField(calllog.FieldDisposition, field.TypeString, value)
	}
	if _u.mutation.DispositionCleared() {
		_spec.ClearField(calllog.FieldDisposition, field.TypeString)
	}
	if value, ok := _u.mutation.IsRecorded(); ok {
		_spec.SetField(calllog.FieldIsRecorded, field.TypeBool, value)
	}
	if value, ok := _u.mutation.StartedAt(); ok {
		_spec.SetField(calllog.FieldStartedAt, field.TypeTime, value)
	}
	if _u.mutation.StartedAtCleared() {
		_spec.ClearField(calllog.FieldStartedAt, field.TypeTime)
	}
	if value, ok := _u.mutation.EndedAt(); ok {
		_spec.SetField(calllog.FieldEndedAt, field.TypeTime, value)
	}
	if _u.mutation.EndedAtCleared() {
		_spec.ClearField(calllog.FieldEndedAt, field.TypeTime)
	}
	if value, ok := _u.mutation.UpdatedAt(); ok {
		_spec.SetField(calllog.FieldUpdatedAt, field.TypeTime, value)
	}
	if _u.mutation.UserCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: true,
			Table:   calllog.UserTable,
			Columns: []string{calllog.UserColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(user.FieldID, field.TypeInt),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.UserIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: true,
			Table:   calllog.UserTable,
			Columns: []string{calllog.UserColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(user.FieldID, field.TypeInt),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	if _u.mutation.LeadCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: true,
			Table:   calllog.LeadTable,
			Columns: []string{calllog.LeadColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(lead.FieldID, field.TypeInt),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.LeadIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: true,
			Table:   calllog.LeadTable,
			Columns: []string{calllog.LeadColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(lead.FieldID, field.TypeInt),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	if _node, err = sqlgraph.UpdateNodes(ctx, _u.driver, _spec); err != nil {
		if _, ok := err.(*sqlgraph.NotFoundError); ok {
			err = &NotFoundError{calllog.Label}
		} else if sqlgraph.IsConstraintError(err) {
			err = &ConstraintError{msg: err.Error(), wrap: err}
		}
		return 0, err
	}
	_u.mutation.done = true
	return _node, nil
}

// CallLogUpdateOne is the builder for updating a single CallLog entity.
type CallLogUpdateOne struct {
	config
	fields   []string
	hooks    []Hook
	mutation *CallLogMutation
}

// SetUserID sets the "user_id" field.
func (_u *CallLogUpdateOne) SetUserID(v int) *CallLogUpdateOne {
	_u.mutation.SetUserID(v)
	return _u
}

// SetNillableUserID sets the "user_id" field if the given value is not nil.
func (_u *CallLogUpdateOne) SetNillableUserID(v *int) *CallLogUpdateOne {
	if v != nil {
		_u.SetUserID(*v)
	}
	return _u
}

// SetLeadID sets the "lead_id" field.
func (_u *CallLogUpdateOne) SetLeadID(v int) *CallLogUpdateOne {
	_u.mutation.SetLeadID(v)
	return _u
}

// SetNillableLeadID sets the "lead_id" field if the given value is not nil.
func (_u *CallLogUpdateOne) SetNillableLeadID(v *int) *CallLogUpdateOne {
	if v != nil {
		_u.SetLeadID(*v)
	}
	return _u
}

// ClearLeadID clears the value of the "lead_id" field.
func (_u *CallLogUpdateOne) ClearLeadID() *CallLogUpdateOne {
	_u.mutation.ClearLeadID()
	return _u
}

// SetPhoneNumber sets the "phone_number" field.
func (_u *CallLogUpdateOne) SetPhoneNumber(v string) *CallLogUpdateOne {
	_u.mutation.SetPhoneNumber(v)
	return _u
}

// SetNillablePhoneNumber sets the "phone_number" field if the given value is not nil.
func (_u *CallLogUpdateOne) SetNillablePhoneNumber(v *string) *CallLogUpdateOne {
	if v != nil {
		_u.SetPhoneNumber(*v)
	}
	return _u
}

// SetDirection sets the "direction" field.
func (_u *CallLogUpdateOne) SetDirection(v calllog.Direction) *CallLogUpdateOne {
	_u.mutation.SetDirection(v)
	return _u
}

// SetNillableDirection sets the "direction" field if the given value is not nil.
func (_u *CallLogUpdateOne) SetNillableDirection(v *calllog.Direction) *CallLogUpdateOne {
	if v != nil {
		_u.SetDirection(*v)
	}
	return _u
}

// SetStatus sets the "status" field.
func (_u *CallLogUpdateOne) SetStatus(v calllog.Status) *CallLogUpdateOne {
	_u.mutation.SetStatus(v)
	return _u
}

// SetNillableStatus sets the "status" field if the given value is not nil.
func (_u *CallLogUpdateOne) SetNillableStatus(v *calllog.Status) *CallLogUpdateOne {
	if v != nil {
		_u.SetStatus(*v)
	}
	return _u
}

// SetDuration sets the "duration" field.
func (_u *CallLogUpdateOne) SetDuration(v int) *CallLogUpdateOne {
	_u.mutation.ResetDuration()
	_u.mutation.SetDuration(v)
	return _u
}

// SetNillableDuration sets the "duration" field if the given value is not nil.
func (_u *CallLogUpdateOne) SetNillableDuration(v *int) *CallLogUpdateOne {
	if v != nil {
		_u.SetDuration(*v)
	}
	return _u
}

// AddDuration adds value to the "duration" field.
func (_u *CallLogUpdateOne) AddDuration(v int) *CallLogUpdateOne {
	_u.mutation.AddDuration(v)
	return _u
}

// SetProviderCallID sets the "provider_call_id" field.
func (_u *CallLogUpdateOne) SetProviderCallID(v string) *CallLogUpdateOne {
	_u.mutation.SetProviderCallID(v)
	return _u
}

// SetNillableProviderCallID sets the "provider_call_id" field if the given value is not nil.
func (_u *CallLogUpdateOne) SetNillableProviderCallID(v *string) *CallLogUpdateOne {
	if v != nil {
		_u.SetProviderCallID(*v)
	}
	return _u
}

// ClearProviderCallID clears the value of the "provider_call_id" field.
func (_u *CallLogUpdateOne) ClearProviderCallID() *CallLogUpdateOne {
	_u.mutation.ClearProviderCallID()
	return _u
}

// SetFromNumber sets the "from_number" field.
func (_u *CallLogUpdateOne) SetFromNumber(v string) *CallLogUpdateOne {
	_u.mutation.SetFromNumber(v)
	return _u
}

// SetNillableFromNumber sets the "from_number" field if the given value is not nil.
func (_u *CallLogUpdateOne) SetNillableFromNumber(v *string) *CallLogUpdateOne {
	if v != nil {
		_u.SetFromNumber(*v)
	}
	return _u
}

// ClearFromNumber clears the value of the "from_number" field.
func (_u *CallLogUpdateOne) ClearFromNumber() *CallLogUpdateOne {
	_u.mutation.ClearFromNumber()
	return _u
}

// SetToNumber sets the "to_number" field.
func (_u *CallLogUpdateOne) SetToNumber(v string) *CallLogUpdateOne {
	_u.mutation.SetToNumber(v)
	return _u
}

// SetNillableToNumber sets the "to_number" field if the given value is not nil.
func (_u *CallLogUpdateOne) SetNillableToNumber(v *string) *CallLogUpdateOne {
	if v != nil {
		_u.SetToNumber(*v)
	}
	return _u
}

// ClearToNumber clears the value of the "to_number" field.
func (_u *CallLogUpdateOne) ClearToNumber() *CallLogUpdateOne {
	_u.mutation.ClearToNumber()
	return _u
}

// SetCost sets the "cost" field.
func (_u *CallLogUpdateOne) SetCost(v float64) *CallLogUpdateOne {
	_u.mutation.ResetCost()
	_u.mutation.SetCost(v)
	return _u
}

// SetNillableCost sets the "cost" field if the given value is not nil.
func (_u *CallLogUpdateOne) SetNillableCost(v *float64) *CallLogUpdateOne {
	if v != nil {
		_u.SetCost(*v)
	}
	return _u
}

// AddCost adds value to the "cost" field.
func (_u *CallLogUpdateOne) AddCost(v float64) *CallLogUpdateOne {
	_u.mutation.AddCost(v)
	return _u
}

// SetRecordingURL sets the "recording_url" field.
func (_u *CallLogUpdateOne) SetRecordingURL(v string) *CallLogUpdateOne {
	_u.mutation.SetRecordingURL(v)
	return _u
}

// SetNillableRecordingURL sets the "recording_url" field if the given value is not nil.
func (_u *CallLogUpdateOne) SetNillableRecordingURL(v *string) *CallLogUpdateOne {
	if v != nil {
		_u.SetRecordingURL(*v)
	}
	return _u
}

// ClearRecordingURL clears the value of the "recording_url" field.
func (_u *CallLogUpdateOne) ClearRecordingURL() *CallLogUpdateOne {
	_u.mutation.ClearRecordingURL()
	return _u
}

// SetRecordingDuration sets the "recording_duration" field.
func (_u *CallLogUpdateOne) SetRecordingDuration(v int) *CallLogUpdateOne {
	_u.mutation.ResetRecordingDuration()
	_u.mutation.SetRecordingDuration(v)
	return _u
}

// SetNillableRecordingDuration sets the "recording_duration" field if the given value is not nil.
func (_u *CallLogUpdateOne) SetNillableRecordingDuration(v *int) *CallLogUpdateOne {
	if v != nil {
		_u.SetRecordingDuration(*v)
	}
	return _u
}

// AddRecordingDuration adds value to the "recording_duration" field.
func (_u *CallLogUpdateOne) AddRecordingDuration(v int) *CallLogUpdateOne {
	_u.mutation.AddRecordingDuration(v)
	return _u
}

// ClearRecordingDuration clears the value of the "recording_duration" field.
func (_u *CallLogUpdateOne) ClearRecordingDuration() *CallLogUpdateOne {
	_u.mutation.ClearRecordingDuration()
	return _u
}

// SetNotes sets the "notes" field.
func (_u *CallLogUpdateOne) SetNotes(v string) *CallLogUpdateOne {
	_u.mutation.SetNotes(v)
	return _u
}

// SetNillableNotes sets the "notes" field if the given value is not nil.
func (_u *CallLogUpdateOne) SetNillableNotes(v *string) *CallLogUpdateOne {
	if v != nil {
		_u.SetNotes(*v)
	}
	return _u
}

// ClearNotes clears the value of the "notes" field.
func (_u *CallLogUpdateOne) ClearNotes() *CallLogUpdateOne {
	_u.mutation.ClearNotes()
	return _u
}

// SetDisposition sets the "disposition" field.
func (_u *CallLogUpdateOne) SetDisposition(v string) *CallLogUpdateOne {
	_u.mutation.SetDisposition(v)
	return _u
}

// SetNillableDisposition sets the "disposition" field if the given value is not nil.
func (_u *CallLogUpdateOne) SetNillableDisposition(v *string) *CallLogUpdateOne {
	if v != nil {
		_u.SetDisposition(*v)
	}
	return _u
}

// ClearDisposition clears the value of the "disposition" field.
func (_u *CallLogUpdateOne) ClearDisposition() *CallLogUpdateOne {
	_u.mutation.ClearDisposition()
	return _u
}

// SetIsRecorded sets the "is_recorded" field.
func (_u *CallLogUpdateOne) SetIsRecorded(v bool) *CallLogUpdateOne {
	_u.mutation.SetIsRecorded(v)
	return _u
}

// SetNillableIsRecorded sets the "is_recorded" field if the given value is not nil.
func (_u *CallLogUpdateOne) SetNillableIsRecorded(v *bool) *CallLogUpdateOne {
	if v != nil {
		_u.SetIsRecorded(*v)
	}
	return _u
}

// SetStartedAt sets the "started_at" field.
func (_u *CallLogUpdateOne) SetStartedAt(v time.Time) *CallLogUpdateOne {
	_u.mutation.SetStartedAt(v)
	return _u
}

// SetNillableStartedAt sets the "started_at" field if the given value is not nil.
func (_u *CallLogUpdateOne) SetNillableStartedAt(v *time.Time) *CallLogUpdateOne {
	if v != nil {
		_u.SetStartedAt(*v)
	}
	return _u
}

// ClearStartedAt clears the value of the "started_at" field.
func (_u *CallLogUpdateOne) ClearStartedAt() *CallLogUpdateOne {
	_u.mutation.ClearStartedAt()
	return _u
}

// SetEndedAt sets the "ended_at" field.
func (_u *CallLogUpdateOne) SetEndedAt(v time.Time) *CallLogUpdateOne {
	_u.mutation.SetEndedAt(v)
	return _u
}

// SetNillableEndedAt sets the "ended_at" field if the given value is not nil.
func (_u *CallLogUpdateOne) SetNillableEndedAt(v *time.Time) *CallLogUpdateOne {
	if v != nil {
		_u.SetEndedAt(*v)
	}
	return _u
}

// ClearEndedAt clears the value of the "ended_at" field.
func (_u *CallLogUpdateOne) ClearEndedAt() *CallLogUpdateOne {
	_u.mutation.ClearEndedAt()
	return _u
}

// SetUpdatedAt sets the "updated_at" field.
func (_u *CallLogUpdateOne) SetUpdatedAt(v time.Time) *CallLogUpdateOne {
	_u.mutation.SetUpdatedAt(v)
	return _u
}

// SetUser sets the "user" edge to the User entity.
func (_u *CallLogUpdateOne) SetUser(v *User) *CallLogUpdateOne {
	return _u.SetUserID(v.ID)
}

// SetLead sets the "lead" edge to the Lead entity.
func (_u *CallLogUpdateOne) SetLead(v *Lead) *CallLogUpdateOne {
	return _u.SetLeadID(v.ID)
}

// Mutation returns the CallLogMutation object of the builder.
func (_u *CallLogUpdateOne) Mutation() *CallLogMutation {
	return _u.mutation
}

// ClearUser clears the "user" edge to the User entity.
func (_u *CallLogUpdateOne) ClearUser() *CallLogUpdateOne {
	_u.mutation.ClearUser()
	return _u
}

// ClearLead clears the "lead" edge to the Lead entity.
func (_u *CallLogUpdateOne) ClearLead() *CallLogUpdateOne {
	_u.mutation.ClearLead()
	return _u
}

// Where appends a list predicates to the CallLogUpdate builder.
func (_u *CallLogUpdateOne) Where(ps ...predicate.CallLog) *CallLogUpdateOne {
	_u.mutation.Where(ps...)
	return _u
}

// Select allows selecting one or more fields (columns) of the returned entity.
// The default is selecting all fields defined in the entity schema.
func (_u *CallLogUpdateOne) Select(field string, fields ...string) *CallLogUpdateOne {
	_u.fields = append([]string{field}, fields...)
	return _u
}

// Save executes the query and returns the updated CallLog entity.
func (_u *CallLogUpdateOne) Save(ctx context.Context) (*CallLog, error) {
	_u.defaults()
	return withHooks(ctx, _u.sqlSave, _u.mutation, _u.hooks)
}

// SaveX is like Save, but panics if an error occurs.
func (_u *CallLogUpdateOne) SaveX(ctx context.Context) *CallLog {
	node, err := _u.Save(ctx)
	if err != nil {
		panic(err)
	}
	return node
}

// Exec executes the query on the entity.
func (_u *CallLogUpdateOne) Exec(ctx context.Context) error {
	_, err := _u.Save(ctx)
	return err
}

// ExecX is like Exec, but panics if an error occurs.
func (_u *CallLogUpdateOne) ExecX(ctx context.Context) {
	if err := _u.Exec(ctx); err != nil {
		panic(err)
	}
}

// defaults sets the default values of the builder before save.
func (_u *CallLogUpdateOne) defaults() {
	if _, ok := _u.mutation.UpdatedAt(); !ok {
		v := calllog.UpdateDefaultUpdatedAt()
		_u.mutation.SetUpdatedAt(v)
	}
}

// check runs all checks and user-defined validators on the builder.
func (_u *CallLogUpdateOne) check() error {
	if v, ok := _u.mutation.PhoneNumber(); ok {
		if err := calllog.PhoneNumberValidator(v); err != nil {
			return &ValidationError{Name: "phone_number", err: fmt.Errorf(`ent: validator failed for field "CallLog.phone_number": %w`, err)}
		}
	}
	if v, ok := _u.mutation.Direction(); ok {
		if err := calllog.DirectionValidator(v); err != nil {
			return &ValidationError{Name: "direction", err: fmt.Errorf(`ent: validator failed for field "CallLog.direction": %w`, err)}
		}
	}
	if v, ok := _u.mutation.Status(); ok {
		if err := calllog.StatusValidator(v); err != nil {
			return &ValidationError{Name: "status", err: fmt.Errorf(`ent: validator failed for field "CallLog.status": %w`, err)}
		}
	}
	if v, ok := _u.mutation.Duration(); ok {
		if err := calllog.DurationValidator(v); err != nil {
			return &ValidationError{Name: "duration", err: fmt.Errorf(`ent: validator failed for field "CallLog.duration": %w`, err)}
		}
	}
	if v, ok := _u.mutation.ProviderCallID(); ok {
		if err := calllog.ProviderCallIDValidator(v); err != nil {
			return &ValidationError{Name: "provider_call_id", err: fmt.Errorf(`ent: validator failed for field "CallLog.provider_call_id": %w`, err)}
		}
	}
	if v, ok := _u.mutation.FromNumber(); ok {
		if err := calllog.FromNumberValidator(v); err != nil {
			return &ValidationError{Name: "from_number", err: fmt.Errorf(`ent: validator failed for field "CallLog.from_number": %w`, err)}
		}
	}
	if v, ok := _u.mutation.ToNumber(); ok {
		if err := calllog.ToNumberValidator(v); err != nil {
			return &ValidationError{Name: "to_number", err: fmt.Errorf(`ent: validator failed for field "CallLog.to_number": %w`, err)}
		}
	}
	if v, ok := _u.mutation.Cost(); ok {
		if err := calllog.CostValidator(v); err != nil {
			return &ValidationError{Name: "cost", err: fmt.Errorf(`ent: validator failed for field "CallLog.cost": %w`, err)}
		}
	}
	if v, ok := _u.mutation.RecordingDuration(); ok {
		if err := calllog.RecordingDurationValidator(v); err != nil {
			return &ValidationError{Name: "recording_duration", err: fmt.Errorf(`ent: validator failed for field "CallLog.recording_duration": %w`, err)}
		}
	}
	if v, ok := _u.mutation.Disposition(); ok {
		if err := calllog.DispositionValidator(v); err != nil {
			return &ValidationError{Name: "disposition", err: fmt.Errorf(`ent: validator failed for field "CallLog.disposition": %w`, err)}
		}
	}
	if _u.mutation.UserCleared() && len(_u.mutation.UserIDs()) > 0 {
		return errors.New(`ent: clearing a required unique edge "CallLog.user"`)
	}
	return nil
}

func (_u *CallLogUpdateOne) sqlSave(ctx context.Context) (_node *CallLog, err error) {
	if err := _u.check(); err != nil {
		return _node, err
	}
	_spec := sqlgraph.NewUpdateSpec(calllog.Table, calllog.Columns, sqlgraph.NewFieldSpec(calllog.FieldID, field.TypeInt))
	id, ok := _u.mutation.ID()
	if !ok {
		return nil, &ValidationError{Name: "id", err: errors.New(`ent: missing "CallLog.id" for update`)}
	}
	_spec.Node.ID.Value = id
	if fields := _u.fields; len(fields) > 0 {
		_spec.Node.Columns = make([]string, 0, len(fields))
		_spec.Node.Columns = append(_spec.Node.Columns, calllog.FieldID)
		for _, f := range fields {
			if !calllog.ValidColumn(f) {
				return nil, &ValidationError{Name: f, err: fmt.Errorf("ent: invalid field %q for query", f)}
			}
			if f != calllog.FieldID {
				_spec.Node.Columns = append(_spec.Node.Columns, f)
			}
		}
	}
	if ps := _u.mutation.predicates; len(ps) > 0 {
		_spec.Predicate = func(selector *sql.Selector) {
			for i := range ps {
				ps[i](selector)
			}
		}
	}
	if value, ok := _u.mutation.PhoneNumber(); ok {
		_spec.SetField(calllog.FieldPhoneNumber, field.TypeString, value)
	}
	if value, ok := _u.mutation.Direction(); ok {
		_spec.SetField(calllog.FieldDirection, field.TypeEnum, value)
	}
	if value, ok := _u.mutation.Status(); ok {
		_spec.SetField(calllog.FieldStatus, field.TypeEnum, value)
	}
	if value, ok := _u.mutation.Duration(); ok {
		_spec.SetField(calllog.FieldDuration, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedDuration(); ok {
		_spec.AddField(calllog.FieldDuration, field.TypeInt, value)
	}
	if value, ok := _u.mutation.ProviderCallID(); ok {
		_spec.SetField(calllog.FieldProviderCallID, field.TypeString, value)
	}
	if _u.mutation.ProviderCallIDCleared() {
		_spec.ClearField(calllog.FieldProviderCallID, field.TypeString)
	}
	if value, ok := _u.mutation.FromNumber(); ok {
		_spec.SetField(calllog.FieldFromNumber, field.TypeString, value)
	}
	if _u.mutation.FromNumberCleared() {
		_spec.ClearField(calllog.FieldFromNumber, field.TypeString)
	}
	if value, ok := _u.mutation.ToNumber(); ok {
		_spec.SetField(calllog.FieldToNumber, field.TypeString, value)
	}
	if _u.mutation.ToNumberCleared() {
		_spec.ClearField(calllog.FieldToNumber, field.TypeString)
	}
	if value, ok := _u.mutation.Cost(); ok {
		_spec.SetField(calllog.FieldCost, field.TypeFloat64, value)
	}
	if value, ok := _u.mutation.AddedCost(); ok {
		_spec.AddField(calllog.FieldCost, field.TypeFloat64, value)
	}
	if value, ok := _u.mutation.RecordingURL(); ok {
		_spec.SetField(calllog.FieldRecordingURL, field.TypeString, value)
	}
	if _u.mutation.RecordingURLCleared() {
		_spec.ClearField(calllog.FieldRecordingURL, field.TypeString)
	}
	if value, ok := _u.mutation.RecordingDuration(); ok {
		_spec.SetField(calllog.FieldRecordingDuration, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedRecordingDuration(); ok {
		_spec.AddField(calllog.FieldRecordingDuration, field.TypeInt, value)
	}
	if _u.mutation.RecordingDurationCleared() {
		_spec.ClearField(calllog.FieldRecordingDuration, field.TypeInt)
	}
	if value, ok := _u.mutation.Notes(); ok {
		_spec.SetField(calllog.FieldNotes, field.TypeString, value)
	}
	if _u.mutation.NotesCleared() {
		_spec.ClearField(calllog.FieldNotes, field.TypeString)
	}
	if value, ok := _u.mutation.Disposition(); ok {
		_spec.SetField(calllog.FieldDisposition, field.TypeString, value)
	}
	if _u.mutation.DispositionCleared() {
		_spec.ClearField(calllog.FieldDisposition, field.TypeString)
	}
	if value, ok := _u.mutation.IsRecorded(); ok {
		_spec.SetField(calllog.FieldIsRecorded, field.TypeBool, value)
	}
	if value, ok := _u.mutation.StartedAt(); ok {
		_spec.SetField(calllog.FieldStartedAt, field.TypeTime, value)
	}
	if _u.mutation.StartedAtCleared() {
		_spec.ClearField(calllog.FieldStartedAt, field.TypeTime)
	}
	if value, ok := _u.mutation.EndedAt(); ok {
		_spec.SetField(calllog.FieldEndedAt, field.TypeTime, value)
	}
	if _u.mutation.EndedAtCleared() {
		_spec.ClearField(calllog.FieldEndedAt, field.TypeTime)
	}
	if value, ok := _u.mutation.UpdatedAt(); ok {
		_spec.SetField(calllog.FieldUpdatedAt, field.TypeTime, value)
	}
	if _u.mutation.UserCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: true,
			Table:   calllog.UserTable,
			Columns: []string{calllog.UserColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(user.FieldID, field.TypeInt),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.UserIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: true,
			Table:   calllog.UserTable,
			Columns: []string{calllog.UserColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(user.FieldID, field.TypeInt),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	if _u.mutation.LeadCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: true,
			Table:   calllog.LeadTable,
			Columns: []string{calllog.LeadColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(lead.FieldID, field.TypeInt),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.LeadIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: true,
			Table:   calllog.LeadTable,
			Columns: []string{calllog.LeadColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(lead.FieldID, field.TypeInt),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	_node = &CallLog{config: _u.config}
	_spec.Assign = _node.assignValues
	_spec.ScanValues = _node.scanValues
	if err = sqlgraph.UpdateNode(ctx, _u.driver, _spec); err != nil {
		if _, ok := err.(*sqlgraph.NotFoundError); ok {
			err = &NotFoundError{calllog.Label}
		} else if sqlgraph.IsConstraintError(err) {
			err = &ConstraintError{msg: err.Error(), wrap: err}
		}
		return nil, err
	}
	_u.mutation.done = true
	return _node, nil
}
